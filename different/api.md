https://www.smashingmagazine.com/2018/01/understanding-using-rest-api/

An **``API``** is an application programming interface. It is a set of rules that allow programs to talk to each other. The developer creates the API on the server and allows the client to talk to it.

**``REST``** determines how the API looks like. It stands for “Representational State Transfer”. It is a set of rules that developers follow when they create their API. One of these rules states that you should be able to get a piece of data (called a resource) when you link to a specific URL.

Each URL is called a **``request``** while the data sent back to you is called a **``response``**.

Кожна URL-адреса називається запитом, а дані, надіслані вам, називаються відповіддю .

## The Anatomy Of A Request
It’s important to know that a request is made up of four things:

* The endpoint (Кінцева точка)
* The method
* The headers
* The data (or body)

**The endpoint** (or route) is the url you request for. (це URL, на який ви запитуєте.)
```
root-endpoint/?
```
**The root-endpoint** is the starting point of the API you’re requesting from (це відправна точка API, з якого ви запитуєте).

The root-endpoint of ``Github’s API`` is ``https://api.github.com`` 

while the root-endpoint ``Twitter’s API`` is ``https://api.twitter.com.``

Цей шлях визначає ресурс, який ви вимагаєте. Подумайте про це, як автоматичний автовідповідач, який просить вас натиснути 1 для послуги, натисніть 2 для іншої послуги, 3 для ще однієї служби тощо.

Ви можете отримати доступ до шляхів так само, як ви можете посилання на частини веб-сайту. 

Наприклад, щоб отримати список всіх повідомлень, позначених "JavaScript" у Smashing Magazine, перейдіть на сторінку ``https://www.smashingmagazine.com/tag/javascript/`` . ``https://www.smashingmagazine.com/`` є кореневою кінцевою точкою і ``/tag/javascript`` є шлях.

You can access paths just like you can link to parts of a website. For example, to get a list of all posts tagged under “JavaScript” on Smashing Magazine, you navigate to ``https://www.smashingmagazine.com/tag/javascript/``. ``https://www.smashingmagazine.com/`` is the root-endpoint and ``/tag/javascript`` is the path.

Щоб зрозуміти, які шляхи вам доступні, вам потрібно переглянути документацію API. Наприклад, скажімо, ви хочете отримати список сховищ певним користувачем через ``API Github``. Документи говорять вам про використання наступного шляху:
```
/users/:username/repos
```

Будь-які двокрапки **(:)** на шляху позначають змінну. Ви повинні замінити ці значення фактичними значеннями при надсиланні вашого запиту. У цьому випадку вам слід замінити **:username** з фактичним ім'ям користувача, який ви шукаєте. Якщо я шукаю свій обліковий запис ``Github``, я заміню **:username** на **zellwk** .

Конечна точка, щоб отримати список моїх репо на Github це:
```
https://api.github.com/users/zellwk/repos
```
Остання частина кінцевої точки - це параметри запиту .Параметри запиту дають вам можливість змінити ваш запит у парах ключових значень. Вони завжди починаються з знакового питання **( ? )**. Кожна пара параметрів потім відділяється амперсандом (** & )**, як це:
```
 ?query1=value1&query2=value2 
 ```
 If you’d like to get a list the repositories that I pushed to recently, you can set ``sort`` to ``push``.

 (Якщо ви хочете отримати список сховищ, які я нещодавно натиснув, ви можете встановити sort щоб push .)
 ```
  https://api.github.com/users/zellwk/repos?sort=pushed
  ```

  ## JSON 
  JSON (JavaScript Object Notation) a common format for sending and requesting data through a REST API. The response that Github sends back to you is also formatted as JSON.

A JSON object looks like a JavaScript Object. In JSON, each property and value must be wrapped with double quotation marks, like this:

``(JavaScript Object Notation) - загальний формат для надсилання та запиту даних через API REST. Відповідь, яку Github відсилає вам, також відформатований як JSON.
Об'єкт JSON виглядає як об'єкт JavaScript. У JSON кожен властивість і значення мають бути загорнутими подвійними лапками, як це:``

```
 { "property1": "value1", "property2": "value2", "property3": "value3" }
 ```

## The Method
(Метод - це тип запиту, який ви надсилаєте на сервер.)

The method is the type of request you send to the server. You can choose from these five types below:
* **GET** - Цей запит використовується для отримання ресурсу з сервера. Якщо ви виконуєте запит `GET`, сервер шукає дані, які ви надіслали, і відправляє їх назад. Іншими словами, запит `GET` виконує операцію` READ`. Це типовий метод запиту.
* **POST** - Цей запит використовується для створення нового ресурсу на сервері. Якщо ви виконуєте запит "POST", сервер створює нову запис у базі даних і повідомляє вам, чи успішне створення. Іншими словами, запит `POST` виконує операцію` CREATE`.
* **PUT та PATCH** - Ці два запити використовуються для оновлення ресурсу на сервері. Якщо ви виконуєте запит "PUT" або "PATCH", сервер оновлює запис у базі даних і повідомляє, чи успішно це оновлення. Іншими словами, запит `PUT` або` PATCH` виконує операцію `UPDATE`.
* **DELETE** - Цей запит використовується для видалення ресурсу з сервера. Якщо ви виконуєте запит "DELETE", сервер видаляє запис у базі даних і повідомляє, чи видаляється це повідомлення успішно. Іншими словами, запит `DELETE` виконує операцію` DELETE`.

Ці методи забезпечують значення запиту, який ви робите. Вони використовуються для виконання чотирьох можливих дій: ``Create , Read , Update та Delete (CRUD)``.

API дозволяє дізнатись, який метод запиту використовується для кожного запиту. Наприклад, щоб отримати список репозиторіїв користувача, потрібно отримати запит GET.Потрібно отримати запит GET, щоб отримати список репозиторіїв від користувача. Щоб створити новий сховище Github , вам потрібен запит POST.

Ви можете встановити метод запиту в cURL, написавши **``-X``** або **``--request``** , а потім - метод запиту. Ця команда нижче намагається створити сховище за допомогою cURL:
```
 curl -X POST https://api.github.com/user/repos 
 ```
 ## The Headers
 Headers are used to provide information to both the client and server. It can be used for many purposes, such as authentication and providing information about the body content.

 (Заголовки використовуються для надання інформації як клієнтові, так і серверу. Він може використовуватися для багатьох цілей, таких як автентифікація та надання інформації про зміст тіла. )

 Заголовки HTTP дозволяють клієнту та серверу передавати додаткову інформацію за запитом або відповіддю. Заголовок HTTP складається з його нечутливого для імені назви, за яким слід двокрапка ' : ', а потім за його значенням (без переривань рядків). Провідний пробіл перед значенням ігнорується.

 #### Заголовки можна групувати за їх контекстами:

* Загальний заголовок : заголовки, що стосуються як запитів, так і відповідей, але не мають ніякого відношення до даних, які в кінцевому підсумку передаються в організмі.
* Заголовок запиту : заголовки, що містять додаткову інформацію про ресурс, який потрібно отримати, або про сам клієнт.
* Заголовок відповіді : Заголовки з додатковою інформацією про відповідь, як-от його місцезнаходження або про сам сервер (ім'я та версія, і т. Д.).
* Заголовок об'єкта : заголовки, що містять більше інформації про тіло сутності, наприклад, його довжина вмісту або його тип MIME.

https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers

**Заголовки HTTP** - це пари властивості , розділені двокрапкою. У наведеному нижче прикладі показано заголовок, який повідомляє серверу про те, що очікується вміст JSON.


```
"Content-Type: application/json". Missing the opening ".
```

Ви можете надсилати заголовки HTTP з завитком через параметр -H або **``--header``** . Щоб відправити вищезазначений заголовок до API Github, ви використовуєте цю команду:
```
curl -H "Content-Type: application/json" https://api.github.com 
```

заголовок Content-Type не є обов'язковим для роботи API API Github. 

Щоб переглянути відправлені заголовки, ви можете використовувати параметр **``-v``** або **``--verbose``** під час надсилання запиту, наприклад:
```
curl -H "Content-Type: application/json" https://api.github.com -v 
```

Тут ``*`` стосується додаткової інформації, наданої cURL. ``>`` стосується заголовків запиту, а ``<`` посилається на заголовки відповідей.

## The Data (Or “Body”)
Дані (іноді звані "тіло" або "повідомлення") містять інформацію, яку ви хочете надіслати на сервер. Цей параметр використовується тільки з запитами ``POST , PUT , PATCH або DELETE .``

Для передачі даних через CURL ви можете скористатись опцією **-d** or **--data** :
```
 curl -X POST <URL> -d property1=value1 
 ```
 Якщо це має сенс, ви можете порушити ваш запит на кілька рядків \ щоб полегшити читання:


```
curl -X POST <URL> \ -d property1=value1 \ -d property2=value2 
```


За замовчуванням cURL надсилає дані так, ніби вони надсилаються через "поля форми" на сторінці. Якщо ви хочете надіслати дані JSON, вам потрібно буде встановити програму Content-Type у application/json , і вам потрібно буде відформатувати свої дані як об'єкт JSON, як це:
```
curl -X POST https://requestb.in/1ix963n1 \ -H "Content-Type: application/json" \ -d '{ "property1":"value1", "property2":"value2" }' 
```
## Authentication
Ви не дозволите будь-кому отримати доступ до вашого банківського рахунку без вашого дозволу, чи не так? На тій же думці розробники вживають заходи для того, щоб ви виконували дії лише тоді, коли у вас є повноваження робити це. Це заважає іншим видати себе за вас.

Оскільки запити ``POST , PUT , PATCH та DELETE ``змінюють базу даних, розробники майже завжди ставлять їх за стіною аутентифікації. У деяких випадках запит ``GET`` також вимагає автентифікації (наприклад, коли ви отримуєте доступ до свого банківського рахунку, наприклад, для перевірки поточного балансу).

В Інтернеті існує два основних шляхи автентифікації:

* За допомогою імені користувача та пароля (також називається базовою автентифікацією)
* З секретним токеном

Щоб виконати базову автентифікацію за допомогою cURL, ви можете використовувати опцію -u , а потім своє ім'я користувача та пароль, наприклад:
```
 curl -x POST -u "username:password" https://api.github.com/user/repos
 ```

 ## Коди стану HTTP та повідомлення про помилку
 Деякі з повідомлень, які ви отримали раніше, наприклад "Необхідність автентифікації" та "Проблеми з розбором JSON" - це повідомлення про помилку. Вони з'являються лише тоді, коли щось не відповідає вашому запиту. Коди стану HTTP дозволяють швидко повідомити про стан відповіді. Діапазон від 100 до 500+. Загалом, ці цифри відповідають наступним правилам:
 * 200+ означає, що запит виконано.
 * 300+ означає, що запит перенаправляється на іншу URL-адресу
 * 400 + означає помилку, яка походить від клієнта
 * 500+ означає помилку, яка походить від сервера

 Ви можете налагодити статус відповіді за допомогою вербальної опції **( -v або --verbose )** або опції голови **( -I або --head )**.

Наприклад, якщо ви спробували додати -I до запиту POST не вказавши своє ім'я користувача та пароль, ви отримаєте код статусу 401 (неавторизований)

## Версії API

Розробники періодично оновлюють API. Іноді API може змінюватися настільки, що розробник вирішує оновити API до іншої версії. Якщо це станеться, і ваша програма буде перервана, це зазвичай тому, що ви написали код для більш старого API, але ваш запит вказує на більш новий API.

Ви можете замовити певну версію API двома способами. Який шлях ви вибираєте залежно від того, як написано API.

Ці два способи:

* Безпосередньо в кінцевій точці
* У заголовку запиту

Наприклад, Twitter використовує перший метод. На момент написання API Twitter знаходиться на версії 1.1, про що свідчить його кінцева точка:
```
 https://api.twitter.com/1.1/account/settings.json
 ```
З іншого боку, Github використовує другий метод. На момент написання API Github знаходиться на версії 3, і ви можете вказати версію з заголовком Accept :
```
 curl https://api.github.com -H Accept:application/vnd.github.v3+json 
 ```

